<div id="post-{{ post.id }}">
    <h2>{{ post.title }}</h2>
    <p>{{ post.content }}</p>

    <!-- –õ–∞–π–∫–∏ -->
    <button id="like-btn" data-post-id="{{ post.id }}">
        {% if request.user in post.likes.all %}‚ù§Ô∏è{% else %}ü§ç{% endif %}
        <span id="like-count">{{ post.likes.count }}</span>
    </button>

    <!-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ -->
    <button id="favorite-btn" data-post-id="{{ post.id }}">
        {% if request.user in post.favorites.all %}‚≠ê{% else %}‚ú©{% endif %}
    </button>
</div>
<script>
    $.ajaxSetup({
        headers: {
            'X-CSRFToken': '{{ csrf_token }}'
        }
    });
</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    // –õ–∞–π–∫–∏
    $('#like-btn').click(function() {
        const postId = $(this).data('post-id');
        $.ajax({
            url: `/like/${postId}/`,
            type: 'POST',
            data: {
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response) {
                $('#like-btn').html(response.liked ? '‚ù§Ô∏è' : 'ü§ç');
                $('#like-count').text(response.total_likes);
            }
        });
    });

    // –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
    $('#favorite-btn').click(function() {
        const postId = $(this).data('post-id');
        $.ajax({
            url: `/favorite/${postId}/`,
            type: 'POST',
            data: {
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response) {
                $('#favorite-btn').html(response.favorited ? '‚≠ê' : '‚ú©');
            }
        });
    });
</script>