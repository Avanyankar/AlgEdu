{% extends 'base.html' %}
{% load static %}

{% block title %}Профиль{% endblock %}

{% block content %}
    <main>
        <div class="profile-navigation">
            <a href="{% url 'index' %}" class="btn btn-home">На главную</a>
        </div>

        <h1>Профиль</h1>
        {% if user.is_authenticated %}
            <div>
                <div class="profile-header">
                    <div class="profile-info">
                        <p>Имя пользователя: {{ user.username }}</p>
                        <p>Email: {{ user.email }}</p>

                        {% if user.first_name or user.last_name or user.birth_date or user.bio or user.location %}
                            {% if user.first_name %}<p>Имя: {{ user.first_name }}</p>{% endif %}
                            {% if user.last_name %}<p>Фамилия: {{ user.last_name }}</p>{% endif %}
                            {% if user.birth_date %}<p>Дата рождения: {{ user.birth_date|date:"d.m.Y" }}</p>{% endif %}
                            {% if user.bio %}<p>Информация о себе: {{ user.bio }}</p>{% endif %}
                            {% if user.location %}<p>Локация: {{ user.location }}</p>{% endif %}
                        {% else %}
                            <p>Профиль не заполнен. <a href="{% url 'profile_update' %}">Заполнить профиль</a></p>
                        {% endif %}
                    </div>

                    <div class="profile-actions">
                        <a href="{% url 'profile_update' %}" class="btn btn-edit">Редактировать профиль</a>
                        <form action="{% url 'logout' %}" method="post" class="logout-form">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-logout">Выйти</button>
                        </form>
                    </div>
                </div>

                <div class="profile-content">
                    <div class="fields-nav">
                        <button class="fields-nav-btn active" data-type="my">Мои карты</button>
                        <button class="fields-nav-btn" data-type="liked">Лайкнутые</button>
                        <button class="fields-nav-btn" data-type="favorites">Избранные</button>
                    </div>

                    <div id="fields-container">
                        <!-- For cards in future -->
                    </div>
                </div>
            </div>
        {% else %}
            <p class="auth-message">
                Чтобы просмотреть профиль, <a href="{% url 'login' %}">войдите в систему</a> или <a href="{% url 'register' %}">зарегистрируйтесь</a>.
            </p>
        {% endif %}

        <script src="{% static 'js/profile_fields.js' %}"></script>
    </main>
{% endblock %}